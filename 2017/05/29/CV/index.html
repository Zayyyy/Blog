<!doctype html>




<html class="theme-next muse" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/Blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/Blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/Blog/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Intelligent," />








  <link rel="shortcut icon" type="image/x-icon" href="/Blog/favicon.ico?v=5.1.1" />






<meta name="description" content="Week 1 Progress Webot part: We designed 6 postures but some are too complicated when setting the virtual robot. The adjustable range of angles in choregraphe is too small to achieve some postures,">
<meta name="keywords" content="Intelligent">
<meta property="og:type" content="article">
<meta property="og:title" content="Computer Vision Project -- Insturct an exercise session">
<meta property="og:url" content="https://zayyyy.github.io/Blog/2017/05/29/CV/index.html">
<meta property="og:site_name" content="Ang. Z">
<meta property="og:description" content="Week 1 Progress Webot part: We designed 6 postures but some are too complicated when setting the virtual robot. The adjustable range of angles in choregraphe is too small to achieve some postures,">
<meta property="og:image" content="https://zayyyy.github.io/Blog/2017/05/29/CV/f4.jpg">
<meta property="og:image" content="https://zayyyy.github.io/Blog/2017/05/29/CV/f5.jpg">
<meta property="og:image" content="https://zayyyy.github.io/Blog/2017/05/29/CV/f.jpg">
<meta property="og:image" content="https://zayyyy.github.io/Blog/2017/05/29/CV/f2.jpg">
<meta property="og:image" content="https://zayyyy.github.io/Blog/2017/05/29/CV/f3.jpg">
<meta property="og:image" content="https://zayyyy.github.io/Blog/2017/05/29/CV/f6.jpg">
<meta property="og:updated_time" content="2017-05-31T14:24:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Computer Vision Project -- Insturct an exercise session">
<meta name="twitter:description" content="Week 1 Progress Webot part: We designed 6 postures but some are too complicated when setting the virtual robot. The adjustable range of angles in choregraphe is too small to achieve some postures,">
<meta name="twitter:image" content="https://zayyyy.github.io/Blog/2017/05/29/CV/f4.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/Blog/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: false,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://zayyyy.github.io/Blog/2017/05/29/CV/"/>





  <title>Computer Vision Project -- Insturct an exercise session | Ang. Z</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/Blog/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Ang. Z</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/Blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/Blog/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/Blog/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/Blog/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/Blog/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user-circle"></i> <br />
            
            About
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://zayyyy.github.io/Blog/Blog/2017/05/29/CV/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ang. Z">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Blog/images/logo.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ang. Z">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Computer Vision Project -- Insturct an exercise session</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-29T19:35:28+02:00">
                2017-05-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/Computer-science/" itemprop="url" rel="index">
                    <span itemprop="name">Computer science</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
         <a id="more"></a> 
<h2 id="Week-1"><a href="#Week-1" class="headerlink" title="Week 1 "></a><font color="#2EA9DF">Week 1 </font></h2><h3 id="Progress"><a href="#Progress" class="headerlink" title="Progress"></a>Progress</h3><ul>
<li>Webot part: We designed 6 postures but some are too complicated when setting the virtual robot. The adjustable range of angles in choregraphe is too small to achieve some postures, so we need to simplify our postures.</li>
<li>Pose estimation: We followed the instruction of 2D articulated human pose estimation software. Luckily, the example of human pose estimation works well. However, when we want to dectect upperbody or fullbody to get the bounding box of our dataset, there are some problems with the calvin upper-body detector. The provided voc-release file is too old without maintance. In this case, we have to change our plan.</li>
<li>Reference:<br>pose estimation: <a href="http://groups.inf.ed.ac.uk/calvin/articulated_human_pose_estimation_code/" target="_blank" rel="external">http://groups.inf.ed.ac.uk/calvin/articulated_human_pose_estimation_code/</a><br>body detector:<a href="http://groups.inf.ed.ac.uk/calvin/calvin_upperbody_detector/" target="_blank" rel="external">http://groups.inf.ed.ac.uk/calvin/calvin_upperbody_detector/</a></li>
</ul>
<h3 id="Issues"><a href="#Issues" class="headerlink" title="Issues"></a>Issues</h3><ol>
<li><p>MATLAB can’t recognize the complier (Xcode 8.x) on Mac.</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt; mex -setup</div><div class="line">Error using mex</div><div class="line">No supported compiler or SDK was found. For options, visit</div><div class="line">http://www.mathworks.com/support/compilers/R2016a/maci64.html.</div></pre></td></tr></table></figure>
<p> <strong>Solution:</strong><br> <br>The reason could be the sdk for your mac version isn’t linked to MATLAB.</p>
<ul>
<li>Edit the file: yourMatlabRoot/bin/maci64/mexopts/clang++_maci64.xml<br></li>
<li>Edit the file: yourMatlabRoot/bin/maci64/mexopts/clang_maci64.xml<br></li>
<li><p>Add following 2 sentences in &lt; ISYSROOT &gt; &lt; SYSROOT &gt; and &lt; SDKVER &gt; &lt; SDKVER &gt;      </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;dirExists name=&quot;$$/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk&quot; /&gt;</div><div class="line">&lt;cmdReturns name=&quot;find $$ -name MacOSX10.12.sdk&quot; /&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>So the code block will look like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;ISYSROOT&gt;</div><div class="line">&lt;and&gt;</div><div class="line">&lt;cmdReturns name=&quot;xcode-select -print-path&quot;/&gt;</div><div class="line">&lt;or&gt;</div><div class="line">&lt;dirExists name=&quot;$$/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk&quot; /&gt;</div><div class="line">&lt;dirExists name=&quot;$$/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk&quot; /&gt;</div><div class="line">&lt;dirExists name=&quot;$$/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk&quot; /&gt;</div><div class="line">&lt;dirExists name=&quot;$$/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk&quot; /&gt;</div><div class="line">&lt;cmdReturns name=&quot;find $$ -name MacOSX10.9.sdk&quot; /&gt;</div><div class="line">&lt;cmdReturns name=&quot;find $$ -name MacOSX10.10.sdk&quot; /&gt;</div><div class="line">&lt;cmdReturns name=&quot;find $$ -name MacOSX10.11.sdk&quot; /&gt;</div><div class="line">&lt;cmdReturns name=&quot;find $$ -name MacOSX10.12.sdk&quot; /&gt;</div><div class="line">&lt;/or&gt;</div><div class="line">&lt;/and&gt;</div><div class="line">&lt;/ISYSROOT&gt;</div><div class="line">&lt;SDKVER&gt;</div><div class="line">&lt;and&gt;</div><div class="line">&lt;and&gt;</div><div class="line">&lt;cmdReturns name=&quot;xcode-select -print-path&quot;/&gt;</div><div class="line">&lt;or&gt;</div><div class="line">&lt;dirExists name=&quot;$$/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk&quot; /&gt;</div><div class="line">&lt;dirExists name=&quot;$$/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk&quot; /&gt;</div><div class="line">&lt;dirExists name=&quot;$$/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk&quot; /&gt;</div><div class="line">&lt;dirExists name=&quot;$$/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk&quot; /&gt;</div><div class="line">&lt;cmdReturns name=&quot;find $$ -name MacOSX10.9.sdk&quot; /&gt;</div><div class="line">&lt;cmdReturns name=&quot;find $$ -name MacOSX10.10.sdk&quot; /&gt;</div><div class="line">&lt;cmdReturns name=&quot;find $$ -name MacOSX10.11.sdk&quot; /&gt;</div><div class="line">&lt;cmdReturns name=&quot;find $$ -name MacOSX10.12.sdk&quot; /&gt;</div><div class="line">&lt;/or&gt;</div><div class="line">&lt;/and&gt;</div><div class="line">&lt;cmdReturns name=&quot;echo $$ | rev | cut -c1-10 | rev | egrep -oh &apos;[0-9]+\.[0-9]+&apos;&quot; /&gt;</div><div class="line">&lt;/and&gt;</div><div class="line">&lt;/SDKVER&gt;</div></pre></td></tr></table></figure>
<p>Reference:<br><a href="https://cn.mathworks.com/matlabcentral/answers/246507-why-can-t-mex-find-a-supported-compiler-in-matlab-r2015b-after-i-upgraded-to-xcode-7-0/" target="_blank" rel="external">https://cn.mathworks.com/matlabcentral/answers/246507-why-can-t-mex-find-a-supported-compiler-in-matlab-r2015b-after-i-upgraded-to-xcode-7-0/</a></p>
</li>
</ul>
</li>
<li><p>Error message in Matlab when using voc-release file: Undefined function ‘resize’ for input arguments of type ‘double’.</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Undefined function &apos;resize&apos; for input arguments of type &apos;double&apos;.</div><div class="line"></div><div class="line">Error in featpyramid (line 22)</div><div class="line">scaled = resize(im, 1/sc^(i-1));</div><div class="line"></div><div class="line">Error in detect (line 69)</div><div class="line">[feat, scales] = featpyramid(input, model.sbin, interval);</div><div class="line"></div><div class="line">Error in DetectStillImage (line 35)</div><div class="line">boxes = detect(tempimg, pffmodel,det_pars.ubfpff_thresh);</div><div class="line"></div><div class="line">Error in DetectAndEstimDir (line 26)</div><div class="line">detections = DetectStillImage(fullfile(img_dir,Files(idx).name),pffubfmodel_path,facemodel_path,det_pars,verbose);</div></pre></td></tr></table></figure>
<p> The definition of the function of resize in resize.cc is:</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mxArray *resize(const mxArray *mxsrc, const mxArray *mxscale) &#123;&#125;</div></pre></td></tr></table></figure>
<p> The input type is mxArrar, not double type. But changing it into double type dosen’t work. No solution now.</p>
</li>
</ol>
<h2 id="Week-2"><a href="#Week-2" class="headerlink" title="Week 2 "></a><font color="#2EA9DF">Week 2 </font></h2><h3 id="Progress-1"><a href="#Progress-1" class="headerlink" title="Progress"></a>Progress</h3><p>Since using MATLAB to extract posture data is infeasible, we decided to work on Kinect to get the skeleton data. We have looked up dozens of documentation and found that MacOS can be connected to Kinect. After fixing a lot of problems when installing the Kinect SDK on Mac, we successfully ran the Kinect. However, we found there is no way to call Pykinect library for programming except using Windows OS. The most ridiculous thing is that all of our group member don’t have Windows laptop. We had no choice but worked on the computer in the laboratory which needed the administrator’s account to install Kinect SDK and other python packages on VS 2013. Due to the above, We wasted lots of time and encountered many problems about pygame enviroment before we can start programming. </p>
<p>Reference:<br><a href="http://blog.nelga.com/setup-microsoft-kinect-on-mac-os-x-10-9-mavericks/" target="_blank" rel="external">http://blog.nelga.com/setup-microsoft-kinect-on-mac-os-x-10-9-mavericks/</a><br><a href="https://github.com/Microsoft/PTVS/wiki/PyKinect" target="_blank" rel="external">https://github.com/Microsoft/PTVS/wiki/PyKinect</a></p>
<h3 id="Issues-1"><a href="#Issues-1" class="headerlink" title="Issues"></a>Issues</h3><ol>
<li><p>Can’t access python environment correctly.<br><br> <strong>Solution:</strong></p>
<ul>
<li>Open solution explorer, set the python environment to the right path.</li>
<li>We recommond to add virtual environment rather than the global environment.<br><br></li>
</ul>
</li>
<li><p>Can’t import pygame and other python package.<br><br> <strong>Solution:</strong></p>
<ul>
<li>Download the required packages.</li>
<li>Open solution explorer.</li>
<li>Right-click on the Python environment and select Install Python Package.</li>
<li>Type the full path to the “Search PyPI and installed packages” box.</li>
<li>Notice: the pip version need to be upgraded to the latest one, or the python package would fail to be installed.</li>
</ul>
</li>
</ol>
<h2 id="Week-3"><a href="#Week-3" class="headerlink" title="Week 3 "></a><font color="#2EA9DF">Week 3 </font></h2><h3 id="Final-result"><a href="#Final-result" class="headerlink" title="Final result"></a>Final result</h3><p>Due to the limitation of devices for developing the project last 2 weeks, we finally borrowed a Windows laptop to code this week. In order to work effienctly, we divided our work into 2 parts, which are training model and matching postures.</p>
<ul>
<li><p><font color="#1E88A8">Training model</font>:</p>
<ul>
<li><strong>Training on our robot’s data.</strong><ul>
<li>26 attributes (26 flexible angles from choregraphe)</li>
<li>Using SVM</li>
<li>Performs very well </li>
</ul>
</li>
<li><strong>Training on real data</strong><ul>
<li>11 attributes (8 posture angles and 3 orientations)</li>
<li>Also very well<br><div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><img src="f4.jpg" alt=""></div><div class="group-picture-column" style="width: 50%;"><img src="f5.jpg" alt=""></div></div><div class="group-picture-row"></div></div></div><br></li>
</ul>
</li>
<li><strong>Due to the need of large dataset, we use normal distrubution to generate 6000 simulation data (1000 data for each posture).</strong><br>  <div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><img src="f.jpg" alt=""></div><div class="group-picture-column" style="width: 50%;"><img src="f2.jpg" alt=""></div></div><div class="group-picture-row"></div></div></div><br><ul>
<li>μ = mean (standard)</li>
<li>σ = standard deviation</li>
</ul>
</li>
<li><strong>Training Result</strong><br> <img src="f3.jpg" alt=""><ul>
<li>SVM accuracy: 99.83%</li>
<li>This training is trustable.<br><br></li>
</ul>
</li>
</ul>
</li>
<li><p><font color="#1E88A8">Matching posture</font>:</p>
<ul>
<li><strong>Obtain skeleton data via Kinect</strong></li>
<li><strong>Extract joint positions via pykinect library</strong></li>
<li><strong>Calculate 11 features</strong><br>   <img src="f6.jpg" alt=""><ul>
<li>Because the angles extracted from virtual robot is different from real human’s skeleton angles, we decided use real data to train model in order to match the posture easily later.</li>
<li>8 skeleton angles – obtained by dot product </li>
<li>3 orientations – used for judge the direction of the arms and feet</li>
</ul>
</li>
<li><strong>Use trained model to test user’s data</strong></li>
<li><strong>Matching</strong><ul>
<li>Pass: the distance between standard data and test data &lt; criteria</li>
<li>Fail: <ul>
<li>predicted label is wrong</li>
<li>predicted label is right but distance does’t meet the criteria</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>correct posture</strong> </p>
<ul>
<li><p>Find the maximum angle of error and output the value to instrut user to correct his or her posture.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">err = []</div><div class="line">max_joint = [ &quot;left elbow&quot;, &quot;left shoulder&quot;,&quot;right elbow&quot;, &quot;right shoulder&quot;, &quot;left knee&quot;, &quot;right knee&quot;, &quot;left hip&quot;, &quot;right hip&quot;, ]</div><div class="line">distance=numpy.linalg.norm(numpy.array(standardData[posture-1])-numpy.array(testData))        </div><div class="line">for i in range(len(testData)):</div><div class="line">      err1 = abs(standardData[posture-1][i]-testData[i])</div><div class="line">      err.append(err1)</div><div class="line">      max_err = max(err)</div><div class="line">for i in range(len(testData)):</div><div class="line">      if (max_err == err[i]):</div><div class="line">        	print &apos;the #&apos;,max_joint[i], &apos;error,  need to modify&apos;, &apos;Need to modify:&apos;, max_err, &apos;degrees&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>User performs posture again until passing.</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><ul>
<li><strong>Correct posture</strong><br><iframe width="560" height="315" src="https://www.youtube.com/embed/fC7D2tcOfIw" frameborder="0" allowfullscreen></iframe></li>
<li><strong>Wrong posture</strong><br><iframe width="560" height="315" src="https://www.youtube.com/embed/iZz_ZFVkNSQ" frameborder="0" allowfullscreen></iframe></li>
<li><strong>Posture needs to be modified</strong><br><iframe width="560" height="315" src="https://www.youtube.com/embed/h57PEmtjw1A" frameborder="0" allowfullscreen></iframe>

</li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/Blog/tags/Intelligent/" rel="tag"># Intelligent</a>
          
        </div>
      

      
        
      

      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/Blog/images/logo.jpeg"
               alt="Ang. Z" />
          <p class="site-author-name" itemprop="name">Ang. Z</p>
           
              <p class="site-description motion-element" itemprop="description">My hand is cold, but my heart is gold</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/Blog/archives">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/Blog/categories/index.html">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/Blog/tags/index.html">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Zayyyy" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Week-1"><span class="nav-number">1.</span> <span class="nav-text">Week 1 </span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Progress"><span class="nav-number">1.1.</span> <span class="nav-text">Progress</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Issues"><span class="nav-number">1.2.</span> <span class="nav-text">Issues</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Week-2"><span class="nav-number">2.</span> <span class="nav-text">Week 2 </span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Progress-1"><span class="nav-number">2.1.</span> <span class="nav-text">Progress</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Issues-1"><span class="nav-number">2.2.</span> <span class="nav-text">Issues</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Week-3"><span class="nav-number">3.</span> <span class="nav-text">Week 3 </span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Final-result"><span class="nav-number">3.1.</span> <span class="nav-text">Final result</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Demo"><span class="nav-number">3.2.</span> <span class="nav-text">Demo</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ang. Z</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/Blog/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/Blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/Blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/Blog/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/Blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/Blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/Blog/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/Blog/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/Blog/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/Blog/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/Blog/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (search_path.endsWith("json")) {
      isXml = false;
    }
    var path = "/Blog/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

</body>


</html>
